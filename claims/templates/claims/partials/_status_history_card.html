{% if claim %}
<div class="glass-card p-6 h-full flex flex-col">
    <h2 class="text-xl font-bold flex items-center gap-3 mb-4 flex-shrink-0">
        <svg class="w-6 h-6 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" /></svg>
        Status History
    </h2>

    <div class="space-y-4 flex-grow overflow-y-auto min-h-0">
        {% for entry in claim.history.all %}
        <div class="relative pl-6">
            <div class="absolute left-0 top-1 h-full border-l-2 border-gray-300"></div>
            <div class="absolute left-[-5px] top-[7px] w-3 h-3 bg-blue-500 rounded-full border-2 border-white"></div>
            <p class="text-sm text-gray-500">{{ entry.timestamp|date:"m/d/Y P" }} by <strong>{% if entry.user %}{{ entry.user.username }}{% else %}A deleted user{% endif %}</strong></p>
            <p class="font-medium">Status changed from <strong>{{ entry.old_status }}</strong> to <strong>{{ entry.new_status }}</strong>.</p>
            {% if entry.comment %}
            <p class="text-sm text-gray-700 mt-1 pl-4 border-l-2 border-gray-200"><em>{{ entry.comment }}</em></p>
            {% endif %}
        </div>
        {% empty %}
        <p class="text-sm text-gray-500">No status changes have been recorded.</p>
        {% endfor %}
    </div>
</div>
{% endif %}