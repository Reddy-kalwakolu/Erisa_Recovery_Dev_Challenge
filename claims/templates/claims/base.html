{% comment %} claims/templates/claims/base.html {% endcomment %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>{% block title %}ERISA Recovery{% endblock %}</title>

<script src="https://cdn.tailwindcss.com"></script>
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
<script src="https://unpkg.com/htmx.org@1.9.12"></script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

<style>
    body { font-family: 'Inter', sans-serif; }
    .glass-card { background: rgba(255, 255, 255, 0.35); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-radius: 1.5rem; border: 1px solid rgba(255, 255, 255, 0.4);
    box-shadow: 0 4px 20px 0 rgba(0, 0, 0, 0.05); position: relative; z-index: 1; transform: translateZ(0); }
    .flex-col-card { display: flex; flex-direction: column; }
    .bubbles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; overflow: hidden; }
    .bubble { position: absolute; bottom: -200px; border-radius: 50%; animation: floatUp 30s infinite ease-in-out; transform-origin: center center; }
    @keyframes floatUp { 0% { transform: translateY(0) translateX(0) rotate(0deg); opacity: 0.7; } 50% { transform: translateY(-60vh) translateX(calc(var(--x-drift) * 1px)) rotate(180deg);
    } 100% { transform: translateY(-120vh) translateX(calc(var(--x-drift) * 2px)) rotate(360deg); opacity: 0; } }
    .status-badge { display: inline-flex; align-items: center; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.75rem; font-weight: 600; }
    .status-denied { background-color: rgba(239, 68, 68, 0.1); color: #dc2626; }
    .status-under-review { background-color: rgba(234, 179, 8, 0.1); color: #ca8a04; }
    .status-paid { background-color: rgba(34, 197, 94, 0.1); color: #16a34a; }
    .status-appealed { background-color: rgba(99, 102, 241, 0.1); color: #4f46e5; }
    [x-cloak] { display: none !important; }
</style>
</head>
<body class="bg-gray-100 text-gray-900" hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'>

<div class="bubbles" id="bubble-container"></div>

<div class="container mx-auto p-4 sm:p-6 lg:p-8 relative z-10">
<header x-data="{ mobileMenuOpen: false, userMenuOpen: false }" class="relative z-30">
    <div class="glass-card px-4 sm:px-6">
        <nav class="flex items-center justify-between h-16">
            <a href="{% url 'claims:home' %}" class="flex-shrink-0 flex items-center gap-2">
                <svg class="h-8 w-8 text-blue-600" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z" fill="currentColor"/></svg>
                <span class="font-extrabold text-lg">ERISA</span><span class="font-medium text-lg">RECOVERY</span>
            </a>
            <div class="hidden sm:flex sm:items-center sm:ml-6 space-x-2">
                <a href="{% url 'claims:home' %}" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {% if request.resolver_match.url_name == 'home' %}bg-white/50 text-gray-900{% else %}text-gray-600 hover:bg-white/30 hover:text-gray-800{% endif %}">Home</a>
                <a href="{% url 'claims:claim-list' %}" id="nav-claims-list" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {% if request.resolver_match.url_name == 'claim-list' %}bg-white/50 text-gray-900{% else %}text-gray-600 hover:bg-white/30 hover:text-gray-800{% endif %}">Claims</a>
                <a href="{% url 'claims:dashboard' %}" id="nav-dashboard" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {% if request.resolver_match.url_name == 'dashboard' %}bg-white/50 text-gray-900{% else %}text-gray-600 hover:bg-white/30 hover:text-gray-800{% endif %}">Dashboard</a>
                <a href="{% url 'claims:upload-claims' %}" id="nav-upload" class="px-3 py-2 rounded-md text-sm font-medium transition-colors {% if request.resolver_match.url_name == 'upload-claims' %}bg-white/50 text-gray-900{% else %}text-gray-600 hover:bg-white/30 hover:text-gray-800{% endif %}">Upload</a>
            </div>
            <div class="hidden sm:flex sm:items-center sm:ml-6">
                {% if user.is_authenticated %}
                <div class="relative">
                    <button @click="userMenuOpen = !userMenuOpen" class="flex items-center gap-2 text-sm font-medium text-gray-700 hover:text-blue-600">
                        <span class="w-8 h-8 flex items-center justify-center bg-blue-100 rounded-full font-bold text-blue-600">{{ user.username|slice:":1"|upper }}</span>
                        <span>Hello, {{ user.username }}</span>
                        <svg class="h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /></svg>
                    </button>
                    <div x-show="userMenuOpen" @click.away="userMenuOpen = false" x-cloak x-transition class="origin-top-right absolute right-0 mt-2 w-48 rounded-xl shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none py-1">
                        <a href="#" onclick="event.preventDefault(); document.getElementById('logout-form').submit();" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                            <svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" /></svg>
                            Sign Out
                        </a>
                    </div>
                </div>
                {% else %}
                <a href="{% url 'claims:login' %}" class="text-sm font-semibold text-white bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg shadow-sm transition-colors">Sign In</a>
                {% endif %}
            </div>
            <div class="-mr-2 flex items-center sm:hidden">
                <button @click="mobileMenuOpen = !mobileMenuOpen" type="button" class="inline-flex items-center justify-center rounded-md p-2 text-gray-500 hover:bg-white/30 hover:text-gray-800 focus:outline-none">
                    <svg x-show="!mobileMenuOpen" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" /></svg>
                    <svg x-show="mobileMenuOpen" class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
                </button>
            </div>
        </nav>
    </div>
    <div x-show="mobileMenuOpen" x-cloak class="sm:hidden glass-card mt-2">
        <div class="space-y-1 px-2 pt-2 pb-3">
        </div>
    </div>
</header>

<main class="mt-8">
    {% block content %}{% endblock %}
</main>
</div>

<div class="container mx-auto p-4 sm:p-6 lg:p-8 relative z-10 mt-12">
    <footer class="glass-card p-6"><div class="flex flex-col sm:flex-row items-center justify-between"><div class="text-center sm:text-left mb-4 sm:mb-0"><p class="text-sm text-gray-700 font-medium">&copy;
    {% now "Y" %} ERISA Recovery. All Rights Reserved.</p><p class="text-xs text-gray-500">Your partner in claim analysis and recovery.</p></div><div class="flex space-x-4 text-sm font-medium text-gray-600"><a href="{% url 'claims:home' %}" class="hover:text-blue-600 transition-colors">Home</a><a href="{% url 'claims:claim-list' %}" class="hover:text-blue-600 transition-colors">Claims</a></div></div></footer>
</div>

{% if user.is_authenticated %}<form id="logout-form" method="post" action="{% url 'claims:logout' %}" style="display: none;">{% csrf_token %}</form>{% endif %}

<script>
    // This single script tag contains all necessary page-level javascript.

    // Bubble script
    document.addEventListener('DOMContentLoaded', function() {
        const bubbleContainer = document.getElementById('bubble-container');
        if (bubbleContainer) {
            const numberOfBubbles = 8;
            const gradients = [
                'radial-gradient(circle at 30% 30%, #a7f3d0, #6ee7b7 90%)', 
                'radial-gradient(circle at 70% 70%, #bfdbfe, #93c5fd 90%)',
                'radial-gradient(circle at 60% 30%, #ddd6fe, #c4b5fd 90%)', 
                'radial-gradient(circle at 30% 70%, #fef3c7, #fde68a 90%)'
            ];
            for (let i = 0; i < numberOfBubbles; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                const size = Math.random() * 120 + 30;
                const left = Math.random() * 100;
                const animationDuration = Math.random() * 20 + 15;
                const animationDelay = Math.random() * 20;
                const xDrift = (Math.random() - 0.5) * 100;
                const gradient = gradients[Math.floor(Math.random() * gradients.length)];
                
                bubble.style.width = `${size}px`;
                bubble.style.height = `${size}px`;
                bubble.style.left = `${left}%`;
                bubble.style.animationDuration = `${animationDuration}s`;
                bubble.style.animationDelay = `${animationDelay}s`;
                bubble.style.backgroundImage = gradient;
                bubble.style.setProperty('--x-drift', xDrift);
                
                bubbleContainer.appendChild(bubble);
            }
        }
    });

    // Note form script
    document.body.addEventListener('htmx:afterOnLoad', function(event) {
        if (event.detail.elt.classList.contains('notes-form')) {
            if (event.detail.successful) {
                event.detail.elt.reset();
            }
        }
    });
</script>

</body>
</html>